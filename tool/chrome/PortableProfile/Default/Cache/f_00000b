_jsload&&_jsload('oppc', 'b1.register(function(ca){var b9=ca;function cb(cl,ch){var cd=cl.srcElement||cl.target,ck=cl.offsetX||cl.layerX||0,cj=cl.offsetY||cl.layerY||0,cg=null,cf=null;if(cd.nodeType!=1){cd=cd.parentNode}while(cd&&cd!=b9.container){if(cd.hashCode){if(r.I(cd.hashCode) instanceof I){cg=r.I(cd.hashCode)}if(r.I(cd.hashCode) instanceof bb){cf=r.I(cd.hashCode)}}if(!(cd.clientWidth==0&&cd.clientHeight==0&&cd.offsetParent&&cd.offsetParent.nodeName=="TD")&&cd.namespaceURI!="http://www.w3.org/2000/svg"){ck+=cd.offsetLeft||0;cj+=cd.offsetTop||0}else{if(cd.namespaceURI=="http://www.w3.org/2000/svg"&&b1.DrawerSelector){var ce=b1.DrawerSelector.getDrawer(b9);var cc=ce.getPalette();if(navigator.userAgent.indexOf("Opera")>-1&&cd.tagName!="svg"){var cm=r.I(cd.hashCode);if(cm){var ci=cm.getBounds();ck=ck+b9.pointToPixel(new bv(ci.minX,ci.minY)).x;cj=cj+b9.pointToPixel(new bv(ci.minX,ci.maxY)).y}break}if(cc&&(!r.Browser.ie||(r.Browser.ie>=9&&cd.nodeName.toLowerCase()=="svg"))){ck+=parseFloat(cc.style.left)+b9.offsetX;cj+=parseFloat(cc.style.top)+b9.offsetY}if(r.Browser.ie>=9&&cd.nodeName.toLowerCase()!="svg"){ck+=b9.offsetX;cj+=b9.offsetY;break}if(!r.Browser.ie){break}}}cd=cd.offsetParent}ch.offsetX=ck;ch.offsetY=cj;ch.pixel=new aT(ck,cj);ch.point=b9.pixelToPoint(ch.pixel);ch.overlay=cg;ch.infoWindow=cf;return ch}ca.container.onselectstart=function(){return false};r.on(ca.container,"contextmenu",function(cc){cc.cancelBubble=true;b0(cc)});r.on(b9.platform,"mousemove",function(cc){if(ca.mapType===BMAP_EARTH_MAP){return}if(b9.currentOperation==0){b9.dispatchEvent(cb(cc,new aM("onmousemove").inherit(cc)))}});r.on(b9.platform,"mousedown",function(cf){if(ca.mapType===BMAP_EARTH_MAP){return}if(!b9.config.enableMouseDown){return}var cf=window.event||cf;if(!r.Browser.ie){b0(cf)}var ce=b9.temp;ce.operating=true;var cd=cf.srcElement||cf.target;if(ce.dragAni){ce.dragAni.stop();ce.dragAni=null;b9.dispatchEvent(new aM("onmoveend"))}ce.tpx=cf.clientX||cf.pageX||0;ce.tpy=cf.clientY||cf.pageY||0;var cc=cd;while(cc){if(cc==b9.container){break}if(r.hc(cc,"BMap_Marker")){ce.operating=false;return}cc=cc.parentNode}if(cd.nodeType!=1){cd=cd.parentNode}if(r.Browser.ie&&b9.maskLayer.setCapture){b9.maskLayer.setCapture()}b9.dispatchEvent(cb(cf,new aM("onmousedown").inherit(cf)));if(b9.config.enableDragging&&!(b9.currentOperation&aO.drag)&&cf.button!=2){ce.mx=ce.tpx;ce.my=ce.tpy;ce.pl=b9.offsetX;ce.pt=b9.offsetY;b9.currentOperation|=aO.drag;if(b9.temp.curSpotsArray.length==0){b9.platform.style.cursor=b9.config.draggingCursor}else{b9.platform.style.cursor="pointer"}}});r.on(document,"mousemove",function(cd){if(ca.mapType===BMAP_EARTH_MAP){return}var cd=window.event||cd;var ck=b9.temp;var ch=cd.clientX||cd.pageX||0;var cf=cd.clientY||cd.pageY||0;if(ck.tpx||ck.tpy){ck.mox=ch-ck.tpx;ck.moy=cf-ck.tpy}var cj=40,cc=18;var ce=new Date().getTime(),cg=(ce-ck.lastLoadTileTime)>cj;if(ce-ck.lastDomMoveTime<cc){return}if(cg){ck.lastLoadTileTime=ce}ck.lastDomMoveTime=ce;if(b9.currentOperation&aO.drag&&b9.config.enableDragging){var ci=b9.platform.style;ci.cursor=b9.config.draggingCursor;if(!ck._moved){b9.dispatchEvent(cb(cd,new aM("ondragstart").inherit(cd)));b9.dispatchEvent(new aM("onmovestart"));ck.dragStartPos=new aT(ch,cf);ck.dragStartTime=ce}if(ck.mx==0&&ck.my==0&&b9.temp.keyboardDrag){ck.mx=ch;ck.my=cf;ck.pl=b9.offsetX;ck.pt=b9.offsetY}if(ch-ck.mx!=0||cf-ck.my!=0){b9.temp._moved=true;b9.dispatchEvent(cb(cd,new aM("ondragging").inherit(cd)));b9._setPlatformPosition(ck.pl+ch-ck.mx,ck.pt+cf-ck.my,null,cg)}}});r.on(document,"mouseup",function(cf){if(ca.mapType===BMAP_EARTH_MAP){return}if(r.Browser.ie&&b9.maskLayer.releaseCapture){b9.maskLayer.releaseCapture()}var cd=b9.temp;if(cd.preEnableClickPan){b9.enableClickPan(true)}var cf=window.event||cf,cc=cf.clientX||cf.pageX,cg=cf.clientY||cf.pageY;if(b9.currentOperation&aO.drag&&b9.config.enableDragging){b9.currentOperation^=aO.drag;if(cd.curSpotsArray.length==0){b9.platform.style.cursor=b9.config.defaultCursor}else{b9.platform.style.cursor="pointer"}if(b9.temp._moved){var ce=cb(cf,new aM("ondragend").inherit(cf));b9.dispatchEvent(ce);b9._processInertialDragging(new aT(cc,cg))}cd._moved=false}cd.operating=false;if(cf.button==2){cd.tpx=null;cd.tpy=null;cd.mox=0;cd.moy=0}});if(!r.Browser.firefox||r.Browser.firefox<4){r.on(b9.container,"contextmenu",function(cf){if(ca.mapType===BMAP_EARTH_MAP){return}var ce=b9.temp,cd=!ce.mox&&!ce.moy;if(ce.rightDblclickTimer){clearTimeout(ce.rightDblclickTimer);ce.rightDblclickTimer=null;if(cd){b9.dispatchEvent(cb(cf,new aM("onrightclick").inherit(cf)));b9.currentOperation|=aO.dblclick;b9.dispatchEvent(cb(cf,new aM("onrightdblclick").inherit(cf)));b9.currentOperation^=aO.dblclick}}else{if(cd){b9.dispatchEvent(cb(cf,new aM("onrightclick").inherit(cf)))}var cc=cb(cf,new aM("onrightclickex").inherit(cf));ce.rightDblclickTimer=setTimeout(function(){ce.rightDblclickTimer=null;if(cd){b9.dispatchEvent(cc)}},b9.config.clickInterval)}})}if(r.Browser.firefox>=4){r.on(b9.container,"mouseup",function(cf){if(ca.mapType===BMAP_EARTH_MAP){return}if(cf.button==2){var ce=b9.temp,cd=!ce.mox&&!ce.moy;if(ce.rightDblclickTimer){clearTimeout(ce.rightDblclickTimer);ce.rightDblclickTimer=null;if(cd){b9.dispatchEvent(cb(cf,new aM("onrightclick").inherit(cf)));b9.currentOperation|=aO.dblclick;b9.dispatchEvent(cb(cf,new aM("onrightdblclick").inherit(cf)));b9.currentOperation^=aO.dblclick}}else{if(cd){b9.dispatchEvent(cb(cf,new aM("onrightclick").inherit(cf)))}var cc=cb(cf,new aM("onrightclickex").inherit(cf));ce.rightDblclickTimer=setTimeout(function(){ce.rightDblclickTimer=null;if(cd){b9.dispatchEvent(cc)}},b9.config.clickInterval)}}})}var i=new Date();function b7(cg){var ce=b9.temp;if(ce.dragAni){ce.dragAni.stop();ce.dragAni=null;setTimeout(function(){b9.dispatchEvent(new aM("onmoveend"))},1)}b9.currentOperation|=aO.mousewheel;var cg=window.event||cg;b9.lastLevel=b9.zoomLevel;var cd=new aM("onmousewheel");cd.trend=cg.wheelDelta>=0||cg.detail<0;var cc=new Date();if(cd.trend==true&&b9.zoomLevel==bR[b9.mapType].zoomLevelMax||cd.trend==false&&b9.zoomLevel==bR[b9.mapType].zoomLevelMin||cc-i<220){b9.currentOperation^=aO.mousewheel;if(cd.trend==true&&b9.zoomLevel==bR[b9.mapType].zoomLevelMax||cd.trend==false&&b9.zoomLevel==bR[b9.mapType].zoomLevelMin){var cf=new aM("onzoomexceeded");if(b9.zoomLevel==bR[b9.mapType].zoomLevelMax){cf.targetZoom=b9.zoomLevel+1}else{cf.targetZoom=b9.zoomLevel-1}ca.dispatchEvent(cf)}b0(cg);return}i=cc;cb(cg,cd.inherit(cg));b9.dispatchEvent(cd);b9.currentOperation^=aO.mousewheel;cg.returnValue=false;b0(cg)}var b8=b9.config.isModernBrowser;if(b8){b9.deepZoom=new ab(b9)}var e=function(cd){var cc=new aM("ondeepzoommousewheel");cb(cd,cc.inherit(cd));b9.dispatchEvent(cc);cd.returnValue=false;b0(cd)};r.on(b9.container,"mousewheel",function(cc){if(ca.mapType===BMAP_EARTH_MAP){return}if(b8){e(cc)}else{b7(cc)}});if(window.addEventListener){b9.container.addEventListener("DOMMouseScroll",function(cc){if(ca.mapType===BMAP_EARTH_MAP){return}if(b8){e(cc)}else{b7(cc)}},false)}r.on(b9.platform,"click",function(cg){if(ca.mapType===BMAP_EARTH_MAP){return}var ce=new aM("onclick"),cf=new aM("onclickex"),cd=b9.temp;cb(cg,ce.inherit(cg));cb(cg,cf.inherit(cg));if(!b9.currentOperation){var cc=!cd.mox&&!cd.moy;if(cc){b9.dispatchEvent(ce)}if(!cd._clickTimer){cd._clickTimer=setTimeout(function(){cd._clickTimer=null;if(cc){b9.dispatchEvent(cf)}},b9.config.clickInterval)}}cd.tpx=null;cd.tpy=null;cd.mox=0;cd.moy=0});r.on(b9.platform,"dblclick",function(cd){if(ca.mapType===BMAP_EARTH_MAP){return}if(!b9.currentOperation){b9.currentOperation|=aO.dblclick;if(r.Browser.ie){b9.dispatchEvent(cb(cd,new aM("onclick").inherit(cd)))}var cc=b9.temp;if(cc._clickTimer){clearTimeout(cc._clickTimer);cc._clickTimer=null}b9.dispatchEvent(cb(cd,new aM("ondblclick").inherit(cd)));b9.currentOperation^=aO.dblclick}});r.on(document,"mousedown",function(ce){var ce=window.event||ce;var cd=ce.srcElement||ce.target;var cc=b9.temp;if(cc.canKeyboard){cc.canKeyboard=ca.container.contains(cd)}else{cc.canKeyboard=ca.platform.contains(cd)}})});aV.prototype._processInertialDragging=function(co){var cr=this;if(!cr.config.enableInertialDragging){cr.dispatchEvent(new aM("onmoveend"));return}var cf=cr.temp;var i=new Date().getTime();if(i-cf.lastDomMoveTime>100){cr.dispatchEvent(new aM("onmoveend"));cf._moved=false;return}else{var cp=cf.dragStartPos,ci=co,e=bQ(cp,ci),cm=[ci.x-cp.x>0?1:-1,ci.y-cp.y>0?1:-1],b9=(i-cf.dragStartTime)/1000,cd=e/b9/2,ce=0.5,cn=cd/(2*ce),cl=0.4*cn*cd/1000,cc=Math.abs(cp.x-ci.x),cb=Math.abs(cp.y-ci.y),cj=0,cg=0;if(cb==0){cj=cc}else{var ca=Math.abs(cp.x-ci.x)/Math.abs(cp.y-ci.y);cg=Math.round(Math.sqrt(cl*cl/(1+ca*ca)));cj=Math.round(ca*cg)}if(cm[0]==-1){cj=-cj}if(cm[1]==-1){cg=-cg}if(cf.dragAni){cf.dragAni.stop();cf.dragAni=null;cr.dispatchEvent(new aM("onmoveend"))}var b8=cd/1000,ck=cr.offsetX,ch=cr.offsetY,cq=true,b7=cr.config.isModernBrowser?60:30;cf.dragAni=new l({duration:cn,fps:b7,transition:function(cs){var cs=cs*b8/(2*ce);return b8*cs-ce*cs*cs},render:function(cs){cs=cs*(4*ce)/(b8*b8);cr._setPlatformPosition(ck+Math.round(cs*cj),ch+Math.round(cs*cg),null,cq)},finish:function(){cf.dragAni=null;cr._setPlatformPosition(ck+Math.round(cj),ch+Math.round(cg));cr.dispatchEvent(new aM("onmoveend"))}})}};function ab(e){this.map=e;this.tileMgr=e.tileMgr;this.canvas2dMapMgr=e.canvas2dMapMgr;this.compatTransform=ah("transform",true);this.zoomCount=0;this.preZoomCount=null;this.preZoomTimes=1;this.deepZoomDiv=null;this.preDeepZoomDiv=null;this.maxZoomWheelDir=1;this.minZoomWheelDir=-1;this.isDispatchZoomStart=false;this.maxZoom=19;this.minZoom=3;this.lastWheelTime=0;this.opMethod="";this.isIE9=r.Browser.ie===9?true:false;this.bindEvent()}var by=ab.prototype;by.bindEvent=function(){var e=this,b7=e.map,i=bR[b7.getMapType()];e.maxZoom=i.zoomLevelMax||19;e.minZoom=i.zoomLevelMin||3;b7.addEventListener("maptypechange",function(b8){if(this.mapType==="B_EARTH_MAP"){if(e.preDeepZoomDiv){e.preDeepZoomDiv.style.display="none"}}else{if(e.preDeepZoomDiv&&e.preDeepZoomDiv.style.display==="none"){e.preDeepZoomDiv.style.display=""}}i=bR[b7.getMapType()];e.maxZoom=i.zoomLevelMax||19;e.minZoom=i.zoomLevelMin||3});b7.addEventListener("deepzoommousewheel",function(b8){e.wheel(b8)})};by.wheel=function(cm){var cq=this,cp=cq.map,ce=cp.temp;if(ce.dragAni){ce.dragAni.stop();ce.dragAni=null;cp.dispatchEvent(new aM("onmoveend"))}var b8=cm.domEvent.timeStamp;var cn=b8-this.lastWheelTime;var ci=cm.domEvent.wheelDelta>=0;var co=Math.abs(cm.domEvent.deltaY);var b9=Math.abs(cm.domEvent.wheelDelta);var cj=co;if(cn>100){this.opMethod="mouseWheel";if(b9===120&&cj<1){this.opMethod="padPintch"}else{if((b9<10||b9!==120)&&cj%1===0){this.opMethod="padScroll"}}if(r.Browser.safari&&b9===12){this.opMethod="mouseWheel"}this.zoomCount=0;this.preZoomCount=null}this.lastWheelTime=b8;this.lastWheelDelta=cm.domEvent.wheelDelta;if(this.opMethod!=="mouseWheel"&&cn<50){if(ci){cq.zoomCount+=0.3}else{cq.zoomCount-=0.3}var cf=b9-this.lastWheelDeltaAbs;var i=cf-this.lastDiff;this.lastDiff=this.lastDiff===0?0.1:this.lastDiff;this.lastDiff=cf;this.lastWheelDeltaAbs=b9;this.lastTrend=ci;if(typeof this.lastTrend==="boolean"&&ci!==this.lastTrend||this.opMethod==="padScroll"&&b9===3&&!isNaN(i)&&Math.abs(cf-this.lastDiff)>50){if(cq.zoomAni){cq.zoomAni.stop();cq.zoomAni=null}}else{if(this.preZoomCount!==0){return}}}this.preZoomCount=this.zoomCount;var cl=cm.domEvent.wheelDelta/120||-cm.domEvent.detail/3,ck=cl>=0?1:-1,cc=Math.ceil(Math.abs(cl))*ck,cb=cc>0?1:-1,b7=cp.getZoom();if(cb<0){cq.maxZoomWheelDir=-1}if(cb>0){cq.minZoomWheelDir=1}var ch=cq.maxZoom;var cd=cq.minZoom;if((b7>=ch&&cb>0&&cq.maxZoomWheelDir===1)||(b7<=cd&&cb<0&&cq.minZoomWheelDir===-1)){var cg=new aM("onzoomexceeded");if(b7>=ch){cg.targetZoom=b7+1}else{cg.targetZoom=b7-1}cp.dispatchEvent(cg);return}cq.zoomCount+=cc;cq.zoomCount=cq.limitZoomCount(cq.zoomCount);var ca=new aT(cm.pixel.x,cm.pixel.y);if(this.opMethod!=="mouseWheel"){if(cq.zoomAni||cq.timer||cq.zoomCount===0){return}cq.timer=setTimeout(function(){var e=Math.abs(cq.zoomCount);e=Math.round(e);if(ci){cq.zoomCount=e}else{cq.zoomCount=-e}cq.zoomCount=cq.limitZoomCount(cq.zoomCount);if(cq.zoomCount===0){cq.timer=null;return}cq.zoomMap(ca,cq.zoomCount,cb);cq.timer=null},20);return}if(cq.zoomAni){cq.zoomAni.stop();cq.zoomAni=null}cq.timer&&clearTimeout(cq.timer);cq.timer=setTimeout(function(){cq.zoomMap(ca,cq.zoomCount,cb);cq.timer=null},10)};by.limitZoomCount=function(b7){var b8=this,b9=b8.minZoom,e=b8.maxZoom,i=this.map.getZoom();b7=Math.min(Math.max(b7,-3),3);if(i+b7>e){b7=e-i}else{if(i+b7<b9){b7=b9-i}}return b7};by.zoomMap=function(cg,cr,ci){var cw=this,ct=cw.map,cb=cw.tileMgr,b9=ct.getZoom(),cs=b9+cr,b7=Math.pow(2,cr),cy=cw.preZoomTimes,ck,cp=ct.width,cm=ct.height,ce=(cg.x-cp/2)/cp,cj=(cg.y-cm/2)/cm,cv=cb.tilesDiv,b8=cv.style,cx,cf,cq=cw.compatTransform;if(!cw.isDispatchZoomStart){cw.isDispatchZoomStart=true;ct.dispatchEvent(new aM("onzoomstart"))}if(ct.overlayDiv){ct.overlayDiv.style.visibility="hidden"}var ca=cb.tileLayers,cd;for(var co=0,cn=ca.length;co<cn;co++){tilelayer=ca[co];if(!tilelayer.baseLayer){tilelayer.tilesDiv.style.visibility="hidden"}}if(!cw.deepZoomDiv){if(!b8[cq]){b8[cq]=!cw.isIE9?"translate3d(0,0,0)":"translate(0,0)"}var cu=cw.preDeepZoomDiv;if(cu){cu.parentNode&&cu.parentNode.removeChild(cu);cw.preDeepZoomDiv=null}cw.preDeepZoomDiv=cw.deepZoomDiv=cv.cloneNode(true);ct.platform.insertBefore(cw.deepZoomDiv,ct.platform.firstChild)}b8.visibility="hidden";var ch=cw.deepZoomDiv.style,e=ct.config.enableContinuousZoom;var cl=0.5;var cc=5;cw.zoomAni=new l({fps:60,duration:e?500:1,transition:function(i){var i=i*cc/(2*cl);return cc*i-cl*i*i},render:function(i){i=i*(4*cl)/(cc*cc);if(cr>0){ck=cy+i*(b7-cy);cx=-cp*(ck-1)*ce;cf=-cm*(ck-1)*cj;ch[cq]=!cw.isIE9?"translate3d("+cx+"px, "+cf+"px, 0) scale("+ck+")":"translate("+cx+"px, "+cf+"px) scale("+ck+")"}else{ck=cy-i*(cy-b7);cx=cp*(1-ck)*ce;cf=cm*(1-ck)*cj;ch[cq]=!cw.isIE9?"translate3d("+cx+"px, "+cf+"px, 0) scale("+ck+")":"translate("+cx+"px, "+cf+"px) scale("+ck+")"}cw.canvas2dMapMgr.drawLabel(ck,cg,b9,cs,cr,i);cw.preZoomTimes=ck},finish:function(){var cC=ct.pixelToPoint(cg),cA=ct.getZoomUnits(cs),cE=new bv(cC.lng+cA*(cp/2-cg.x),cC.lat-cA*(cm/2-cg.y));ct.zoomLevel=cs;ct.centerPoint=cE;if(cs===3&&ct.getMapType()==="B_NORMAL_MAP"){ct.centerPoint.lat=0}if(ct.overlayDiv){ct.overlayDiv.style.visibility=""}for(var cB=0,cz=ca.length;cB<cz;cB++){tilelayer=ca[cB];if(!tilelayer.baseLayer){tilelayer.tilesDiv.style.visibility=""}}b8.visibility="";cb.moveGridTiles();var cD=new aM("onzoomend");cD.notClearLabel=true;ct.dispatchEvent(cD);cw.zoomCount=0;cw.preZoomTimes=1;cw.deepZoomDiv=null;cw.zoomAni=null;cw.maxZoomWheelDir=1;cw.minZoomWheelDir=-1;cw.isDispatchZoomStart=false}})};b1.register(function(i){var e=i;r.on(document,"keydown",function(b7){if(e.temp.stopArrow==true){e.temp.stopArrow=false}if(e.config.enableKeyboard&&e.temp.canKeyboard){var b7=window.event||b7;switch(b7.keyCode||b7.which){case 43:case 189:case 109:case 173:e.temp.operating=true;e.dispatchEvent(new aM("onminuspress"));break;case 43:case 61:case 187:case 107:e.temp.operating=true;e.dispatchEvent(new aM("onpluspress"));break;case 33:e.temp.operating=false;e.temp.stopArrow=true;b7.cancelBubble=true;b7.returnValue=false;break;case 34:e.temp.operating=false;e.temp.stopArrow=true;b7.cancelBubble=true;b7.returnValue=false;break;case 35:e.temp.operating=false;e.temp.stopArrow=true;b7.cancelBubble=true;b7.returnValue=false;break;case 36:e.temp.operating=false;e.temp.stopArrow=true;b7.cancelBubble=true;b7.returnValue=false;break;case 37:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=1;e._arrow();b7.cancelBubble=true;b7.returnValue=false;break;case 38:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=2;e._arrow();b7.cancelBubble=true;b7.returnValue=false;break;case 39:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=4;e._arrow();b7.cancelBubble=true;b7.returnValue=false;break;case 40:if(e.mapType==="B_EARTH_MAP"){return}e.temp.operating=true;e.temp.arrow|=8;e._arrow();b7.cancelBubble=true;b7.returnValue=false;break}}});r.on(document,"keyup",function(b7){if(e.config.enableKeyboard){var b7=window.event||b7;switch(b7.keyCode||b7.which){case 37:e.temp.arrow=e.temp.arrow&~1;if(e.temp.arrow!=0){e._arrow()}break;case 38:e.temp.arrow=e.temp.arrow&~2;if(e.temp.arrow!=0){e._arrow()}break;case 39:e.temp.arrow=e.temp.arrow&~4;if(e.temp.arrow!=0){e._arrow()}break;case 40:e.temp.arrow=e.temp.arrow&~8;if(e.temp.arrow!=0){e._arrow()}break}}e.temp.operating=false});aV.prototype._arrow=function(){if(this.mapType===BMAP_EARTH_MAP){return}if(this._arrow.occurrent&&this._arrow._lastArrow==this.temp.arrow&&this.temp.stopArrow==true){return}var b7=this;var b9=b7.temp.arrow;b7._arrow._lastArrow=b9;b7._arrow.interval=30;b7._arrow.duration=999;b7._arrow.dx=b7._arrow.dy=0;if(b9&1){b7._arrow.dx=1}if(b9&2){b7._arrow.dy=1}if(b9&4){b7._arrow.dx=-1}if(b9&8){b7._arrow.dy=-1}if(b9&1&&b9&4){b7._arrow.dx=0}if(b9&2&&b9&8){b7._arrow.dy=0}if(!b7._arrow.occurrent){b7._arrow.occurrent=true;b7._arrow.time=new Date().getTime();b7._arrow.beginTime=b7._arrow.time;b7.dispatchEvent(new aM("onmovestart"));var b8=new l({fps:b7._arrow.interval,duration:b7._arrow.duration,transition:Z.linear,render:function(cg){var cb=b7._arrow;var ce=b7.temp.arrow;if(b7._arrow._lastArrow!=ce){b7._arrow._lastArrow=ce;if(ce&1){cb.dx=1}if(ce&2){cb.dy=1}if(ce&4){cb.dx=-1}if(ce&8){cb.dy=-1}if(ce&1&&ce&4){cb.dx=0}if(ce&2&&ce&8){cb.dy=0}}if(b7.temp.stopArrow==true){cb.dx=0;cb.dy=0}var cf=new Date().getTime();var cd=Math.pow((cf-cb.beginTime)/cb.duration,2);if(!b7.temp.arrow){cb.occurrent=false;b8.terminative=true;b7._arrow.time=new Date().getTime();setTimeout(function(){b7.dispatchEvent(new aM("onmoveend"))},40)}var ch=(cf-cb.time);var cc=cb.dx*ch*cd>=0?Math.ceil(cb.dx*ch*cd):Math.floor(cb.dx*ch*cd);var ca=cb.dy*ch*cd>=0?Math.ceil(cb.dy*ch*cd):Math.floor(cb.dy*ch*cd);if(cc!=0&&ca!=0){cc=Math.round(cc*0.7);ca=Math.round(ca*0.7)}cb.time=cf;b7._setPlatformPosition(b7.offsetX+cc,b7.offsetY+ca)},finish:function(){b7._arrow.time=new Date().getTime();setTimeout(function(){b7._arrowPan()},b7._arrow.interval)}})}};aV.prototype._arrowPan=function(){var ca=this;var b8=ca._arrow;if(ca.temp.stopArrow){b8.dx=0;b8.dy=0}if(!ca.temp.arrow){b8.occurrent=false;ca.dispatchEvent(new aM("onmoveend"));return}var cb=new Date().getTime();var cc=(cb-b8.time);var b9=Math.ceil(b8.dx*cc);var b7=Math.ceil(b8.dy*cc);b8.time=cb;ca._setPlatformPosition(ca.offsetX+b9,ca.offsetY+b7);setTimeout(function(){ca._arrowPan()},b8.interval)}});bd.prototype.zoom=function(b9,b8){var cb=b8?b8.width:0;var ca=b8?b8.height:0;var cm=this.map;var co=cm.config;var cn=this;var cl={x:b9.x-parseInt(cn.tilesDiv.style.left)-cm.offsetX,y:b9.y-parseInt(cn.tilesDiv.style.top)-cm.offsetY};if(cm.overlayDiv){cm.overlayDiv.style.visibility="hidden"}var e;for(var ci=0,ch=cn.tileLayers.length;ci<ch;ci++){e=cn.tileLayers[ci];if(!e.baseLayer){e.tilesDiv.style.visibility="hidden"}}if(!this.zoomsDiv){this.zoomsDiv=this.tilesDiv.cloneNode(true)}else{if(this.zoomsDiv.parentNode&&!this._zTimeLine){this.zoomsDiv.parentNode.removeChild(this.zoomsDiv);this.zoomsDiv=null;this.zoomsDiv=this.tilesDiv.cloneNode(true)}}var b7=this.zoomsDiv,cf=b7.style;cf.display="block";this.tilesDiv.style.visibility="hidden";cm.platform.insertBefore(b7,cm.platform.firstChild);var ck=[];var cc=cm.zoomLevel-cm.lastLevel;if(!cn._diff){cn._diff=cc}else{if(cm.zoomLevel-cm.lastLevel>0){cn._diff++}else{cn._diff--}}if(this._zTimeLine&&this._zTimeLine.schedule==0){this._zTimeLine.stop();this._zTimeLine=null;cc=cn._diff}var ce=Math.pow(2,cc);var cj=b7.children.length;for(var ci=cj-1;ci>-1;ci--){var cd={};var cg=b7.children[ci].style;cd.top=parseInt(cg.top)||0;cd.left=parseInt(cg.left)||0;cd.width=parseInt(cg.width);cd.height=parseInt(cg.height);cd.dw=cd.width*ce-cd.width;cd.dh=cd.height*ce-cd.height;cd.dx=(cd.left-cl.x)*ce-(cd.left-cl.x);cd.dy=(cd.top-cl.y)*ce-(cd.top-cl.y);ck[ci]=cd}b7._ol=parseInt(b7.style.left);b7._ot=parseInt(b7.style.top);if(this._zTimeLine){this._zTimeLine.stop();this._zTimeLine=null}this._zTimeLine=new l({fps:20,duration:co.enableContinuousZoom?co.zoomerDuration:1,transition:Z.easeInQuad,render:function(cr){if(cr<0.1){return}for(var cq=ck.length-1;cq>-1;cq--){var cs=ck[cq];if(b7.children[cq]){var cp=b7.children[cq].style;cp.top=Math.round(cs.top+cs.dy*cr)+"px";cp.left=Math.round(cs.left+cs.dx*cr)+"px";cp.width=Math.ceil(cs.width+cs.dw*cr)+"px";cp.height=Math.ceil(cs.height+cs.dh*cr)+"px"}}if(cb||ca){cf.left=b7._ol-(cb*cr)+"px";cf.top=b7._ot-(ca*cr)+"px"}},finish:function(){if(cm.getZoom()===3&&cm.getMapType()==="B_NORMAL_MAP"){cm.centerPoint.lat=0}cn.moveGridTiles(true);if(cm.overlayDiv){if(r.Browser.ie&&r.Browser.ie<8||document.compatMode=="BackCompat"){cm.overlayDiv.style.visibility="visible"}else{setTimeout(function(){cm.overlayDiv.style.visibility="visible"},10)}}for(var cq=0,cp=cn.tileLayers.length;cq<cp;cq++){e=cn.tileLayers[cq];if(!e.baseLayer){e.tilesDiv.style.visibility=""}}cn.tilesDiv.style.visibility="";delete cn._diff;cm.dispatchEvent(new aM("onzoomend"));b7=null;cn._zTimeLine=null}})};');
﻿_jsload&&_jsload('control', 'r.extend(S.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){bE.prototype.initialize.call(this,e);this._render();this._updateState();this._bind(e);return this._container},_bind:function(i){var e=this;i.addEventListener("load",function(b7){e._updateState()});i.addEventListener("moveend",function(b7){e._updateState()});i.addEventListener("zoomend",function(b7){e._updateState()})},_render:function(){bE.prototype._render.call(this);r.ac(this._container,"BMap_cpyCtrl");var e=this._container.style;e.cursor="default";e.whiteSpace="nowrap";e.MozUserSelect="none";e.WebkitTextSizeAdjust="none";bE.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_updateState:function(){if(!this._map||!this._container||this._copyrightCollection.length==0){return}for(var ca=0,b8=this._copyrightCollection.length;ca<b8;ca++){var b7;var e=this._map.getZoom();if(this._copyrightCollection[ca].mapType!=""&&this._map.mapType!=this._copyrightCollection[ca].mapType){b7=false}else{if(e<this._copyrightCollection[ca].minZoom){b7=false}else{var ce=this._map.pixelToPoint({x:0,y:0});var cd=this._map.pixelToPoint({x:this._map.width,y:this._map.height});var cc=new ba(ce.lng,ce.lat,cd.lng,cd.lat);if(this._copyrightCollection[ca].bounds&&cc.intersects(this._copyrightCollection[ca].bounds)==null){b7=false}else{b7=true}}}if(b7){if(this._container){var cf=false;for(var b9=0,cb=this._container.children.length;b9<cb;b9++){if(this._container.children[b9].getAttribute("_cid")==this._copyrightCollection[ca].id){cf=true;this._container.children[b9].style.display="inline";if(this._container.children[b9].innerHTML!=this._copyrightCollection[ca].content){this._container.children[b9].innerHTML=this._copyrightCollection[ca].content}break}}if(!cf){this._generateHTML(this._copyrightCollection[ca])}}}else{if(this._container){for(var b9=0;b9<this._container.children.length;b9++){if(this._container.children[b9].getAttribute("_cid")==this._copyrightCollection[ca].id&&this._container.children[b9].style.display!="none"){this._container.children[b9].style.display="none";return}}}}}},addCopyright:function(b8){if(!b8||typeof b8.id!="number"||isNaN(b8.id)){return}var e={minZoom:0,bounds:null,content:"",mapType:""};for(var b7 in b8){e[b7]=b8[b7]}if(this._map){var cb=e.minZoom;if(cb==-1||cb<bR[this._map.mapType].zoomLevelMin||cb>bR[this._map.mapType].zoomLevelMax){e.minZoom=bR[this._map.mapType].zoomLevelMin}if(e.mapType!=""&&!bR[e.mapType]){e.mapType=BMAP_NORMAL_MAP}}var b9=this.getCopyright(b8.id);if(b9){for(var ca in e){b9[ca]=e[ca]}}else{this._copyrightCollection.push(e)}this._updateState()},getCopyright:function(b8){for(var b7=0,e=this._copyrightCollection.length;b7<e;b7++){if(this._copyrightCollection[b7].id==b8){return this._copyrightCollection[b7]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(ca){var b8;for(var b7=0,e=this._copyrightCollection.length;b7<e;b7++){if(this._copyrightCollection[b7].id==ca){b8=this._copyrightCollection.splice(b7,1);b7--;e=this._copyrightCollection.length}}var b9=this.getDom(ca);if(b9&&b9.parentNode){b9.parentNode.removeChild(b9);b9=null}this._updateState();return b8},_generateHTML:function(e){if(!this._container){return}this._container.innerHTML+="<span _cid=\'"+e.id+"\'>"+e.content+"</span>"},getDom:function(b9){var b8=bE.prototype.getDom.call(this);if(typeof b9=="undefined"){return b8}else{if(b8){for(var b7=0,e=b8.children.length;b7<e;b7++){if(b8.children[b7].getAttribute("_cid")==b9){return b8.children[b7]}}}}}});function H(){}r.extend(C.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map);this.dispatchEvent(new aM("ondomready"))}},initialize:function(e){bE.prototype.initialize.call(this,e);this._setParam();this._render();this._bind();this._setSliderZoomLv(e.getZoom());this._bindMapEvent(e);if(e.mapType==="B_EARTH_MAP"){this._container.style.transitionDelay=this._container.style.WebkitTransitionDelay="0s";this.setOffset(new aj(10,-250))}else{this._container.style.transitionDelay=this._container.style.WebkitTransitionDelay=".3s";var i=this._opts.offset||(new aj(10,20));this.setOffset(i)}this.redraw();return this._container},_bindMapEvent:function(i){var e=this;i.addEventListener("zoomend",function(b7){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom());if(e._msover){return}if(e._isShowLevelHint){if(e.getType()===BMAP_NAVIGATION_CONTROL_ANIM){e._hideTimerId=setTimeout(function(){e._hideLevelHint(true);e._shrinkSlider()},1000)}else{e._hideTimerId=setTimeout(function(){e._hideLevelHint(true)},1000)}}});i.addEventListener("mousewheel",function(){if(!e._map){return}if(e._map.config.enableWheelZoom&&e._isShowLevelHint){if(e._hideTimerId){clearTimeout(e._hideTimerId);e._hideTimerId=null}if(e.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){e._showLevelHint()}}});i.addEventListener("load",function(b7){if(!e._map){return}e._setSliderZoomLv(e._map.getZoom())});i.addEventListener("maptypechange",function(b7){if(!e._map){return}if(e._map.mapType==="B_EARTH_MAP"){if(e._firstAnimation){e._firstAnimation=false;setTimeout(function(){if(e._container){e._container.style.transitionDelay=e._container.style.WebkitTransitionDelay="0s";e.setOffset(new aj(10,-250))}},200)}else{e._container.style.transitionDelay=e._container.style.WebkitTransitionDelay="0s";e.setOffset(new aj(10,-250))}}else{var b8=e._opts.offset;if(b7.exMapType===BMAP_EARTH_MAP){b8=new aj(10,20)}e._container.style.transitionDelay=e._container.style.WebkitTransitionDelay="0.3s";e.setOffset(b8)}e.redraw()})},redraw:function(){this._setParam();this.setType(this._opts.type);if(this._map){this._setSliderZoomLv(this._map.getZoom())}},_setParam:function(){this._minZoomLevel=this._map.config.zoomLevelMin;this._maxZoomLevel=this._map.config.zoomLevelMax;if(this._minZoomLevel>4||this._maxZoomLevel<18){this._isShowLevelHint=false}else{this._isShowLevelHint=true}this._totalZoomLv=this._maxZoomLevel-this._minZoomLevel+1;this._maxBarY=this._minBarY+(this._totalZoomLv-1)*this._sliderInterval;this._firstAnimation=true},_render:function(){bE.prototype._render.call(this);var b7=r.Browser.ie==6?" BMap_ie6":"";var i=" BMap_stdMpType"+this._opts.type;var b8=this._container;b8.style.WebkitTransition=b8.style.transition="bottom .3s ease-out";r.ac(b8,"BMap_stdMpCtrl");r.ac(b8,b7);r.ac(b8,i);b8.innerHTML=this._generateHtml(this._opts.type);this._setSliderBarCursor(r.Browser.opera?"pointer":bu.defaultCursor);this._panBtnContainer=r.G(b8.children[0]);this._zoomDom=r.G(b8.children[1]);var e=this._zoomDom;this._btnZoomIn=r.G(e.children[0]);this._btnZoomOut=r.G(e.children[1]);this._sliderDom=r.G(e.children[2]);this._sliderBaseDom=r.G(e.children[2].children[0]);this._sliderBotDom=r.G(e.children[2].children[1]);this.setType(this._opts.type)},_setSliderHeight:function(){var i=this._opts.type;var b8=this.controlHeight[i].width;var b9=this.controlHeight[i].height;var ca=this.controlHeight[i].zoomHeight;var e=this.controlHeight[i].zoomWidth;var cb=this.controlHeight[i].sliderHeight;if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){}this._container.style.width=b8+"px";this._container.style.height=b9+"px";this._zoomDom.style.height=ca+"px";this._zoomDom.style.width=b8+"px";if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM){this._btnZoomOut.style.top=24+"px"}else{var b7=(this._opts.forceNew===true)?29:23;this._btnZoomOut.style.top=ca-b7+"px"}this._sliderDom.style.height=cb+"px";this._sliderBaseDom.style.height=cb+"px";if(this._opts.type==BMAP_NAVIGATION_CONTROL_ZOOM){this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left="0"}else{this._zoomDom.children[0].style.left=this._zoomDom.children[1].style.left=""}},_generateHtml:function(){var e=[];e.push(this._generatePanHtml());e.push(this._generateZoomContainerHtml());return e.join("")},_generatePanHtml:function(){var e=\'<div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div>\';return e},_generateZoomContainerHtml:function(){var e=\'<div class="BMap_stdMpZoom">\'+this._generateZoomHtml()+this._generateSliderHtml()+this._generateZoomBalloonHtml()+"</div>";return e},_generateZoomHtml:function(){var e="BMap_button";(this._opts.forceNew===true)&&(e="BMap_button_new");var i=\'<div class="\'+e+\' BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg in"></div></div><div class="\'+e+\' BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg out"></div></div>\';return i},_generateSliderHtml:function(){var e=\'<div class="BMap_stdMpSlider"><div class="BMap_stdMpSliderBgTop"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放"><div class="BMap_smcbg"></div></div></div>\';return e},_generateZoomBalloonHtml:function(){var e=\'<div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div>\';return e},setType:function(e){if(typeof e=="number"&&e>=BMAP_NAVIGATION_CONTROL_LARGE&&e<=BMAP_NAVIGATION_CONTROL_ANIM){this._opts.type=e}else{this._opts.type=BMAP_NAVIGATION_CONTROL_LARGE}if(!this._map||!this._container){return}var i=this._container;i.className=i.className.replace(/BMap_stdMpType\\d/,"BMap_stdMpType"+this._opts.type);this._setSliderHeight();if(e!=BMAP_NAVIGATION_CONTROL_LARGE&&e!=BMAP_NAVIGATION_CONTROL_ANIM){r.rc(i.children[1].children[2],"hvr")}this.setAnchor(this._opts.anchor)},getType:function(){return this._opts.type},_bind:function(){var ci=this;var ch=ci._container;var ca=this._opts.from=="MAP_INDEX";function b9(i,ck){return i.contains?i!=ck&&i.contains(ck):!!(i.compareDocumentPosition(ck)&16)}function cd(cm,cl){var ck,i=cm.type.toLowerCase();if(i=="mouseover"){ck=cm.relatedTarget||cm.fromElement}else{if(i="mouseout"){ck=cm.relatedTarget||cm.toElement}else{return true}}return ck&&ck.prefix!="xul"&&!b9(cl,ck)&&ck!==cl}r.on(ch,"mouseover",function(i){i=i||window.event;if(cd(i,ch)){ci.dispatchEvent(new aM("onmouseover"))}});r.on(ch,"mouseout",function(i){i=i||window.event;if(cd(i,ch)){ci.dispatchEvent(new aM("onmouseout"))}});function b8(){if(!ci._isShowLevelHint){return}ci._msover=true;if(ci._hideTimerId){clearTimeout(ci._hideTimerId);ci._hideTimerId=null}ci._expandSlider();if(ci.getType()!==BMAP_NAVIGATION_CONTROL_ANIM){ci._showLevelHint()}}function cc(){if(!ci._isShowLevelHint){return}if(ci._hideTimerId){clearTimeout(ci._hideTimerId)}ci._msover=false;ci._hideTimerId=setTimeout(function(){ci._hideLevelHint();ci._hideTimerId=null;ci._shrinkSlider()},1000)}if("onmouseenter" in document.documentElement){r.on(this._zoomDom,"mouseenter",function(i){b8()});r.on(this._zoomDom,"mouseleave",function(ck){var i=ck.relatedTarget;if(i&&(i===this||b9(this,i))){return}cc()})}else{r.on(this._zoomDom,"mouseover",function(ck){var i=ck.relatedTarget;if(i&&(i===this||b9(this,i))){return}b8()});r.on(this._zoomDom,"mouseout",function(ck){var i=ck.relatedTarget;if(i&&(i===this||b9(this,i))){return}cc()})}r.on(ch.children[0],"mouseover",function(){ci._hideLevelHint(true)});r.on(ch.children[0].children[0],"click",function(){ci._panBy(0,Math.round(ci._map.height/3));ca?H(6004):null});r.on(ch.children[0].children[1],"click",function(){ci._panBy(Math.round(ci._map.width/3),0);ca?H(6004):null});r.on(ch.children[0].children[2],"click",function(){ci._panBy(-Math.round(ci._map.width/3),0);ca?H(6004):null});r.on(ch.children[0].children[3],"click",function(){ci._panBy(0,-Math.round(ci._map.height/3));ca?H(6004):null});r.on(ch.children[0].children[0],"mouseover",function(){ci._panBtnContainer.style.backgroundPosition="0 -44px"});r.on(ch.children[0].children[1],"mouseover",function(){ci._panBtnContainer.style.backgroundPosition="0 -176px"});r.on(ch.children[0].children[2],"mouseover",function(){ci._panBtnContainer.style.backgroundPosition="0 -88px"});r.on(ch.children[0].children[3],"mouseover",function(){ci._panBtnContainer.style.backgroundPosition="0 -132px"});r.on(ci._panBtnContainer,"mouseout",function(){ci._panBtnContainer.style.backgroundPosition="0 0"});var cg=ch.children[1].children;r.on(cg[0],"click",function(){ca?H(6005):null;var i=ci._map;if(i.config.isModernBrowser){ci._deepZoomIn()}else{ci._zoomIn()}});r.on(cg[1],"click",function(){ca?H(6005):null;var i=ci._map;if(i.config.isModernBrowser){ci._deepZoomOut()}else{ci._zoomOut()}});for(var cb=1;cb<6;cb++){r.on(ch.children[0].children[cb],"mouseup",function(i){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0&&(ci._map.currentOperation&aO.drag)==0){aq(i)}});r.on(ch.children[0].children[cb],"contextmenu",function(i){b0(i)});r.on(ch.children[0].children[cb],"click",function(i){b0(i)})}r.on(cg[0],"mouseup",function(i){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0&&(ci._map.currentOperation&aO.drag)==0){aq(i)}});r.on(cg[1],"mouseup",function(i){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0&&(ci._map.currentOperation&aO.drag)==0){aq(i)}});r.on(cg[0],"contextmenu",function(i){b0(i)});r.on(cg[1],"contextmenu",function(i){b0(i)});var cj=ch.children[1].children[2].children[2];r.on(cj,"mouseup",function(i){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0&&(ci._map.currentOperation&aO.drag)==0){aq(i)}});r.on(cg[0],"click",function(i){aq(i)});r.on(cg[1],"click",function(i){aq(i)});r.on(cg[0],"mouseover",function(){});r.on(cg[0],"mouseout",function(){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0){}});r.on(cg[1],"mouseover",function(){});r.on(cg[1],"mouseout",function(){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0){}});r.on(cj,"click",function(i){aq(i)});var cf=ch.children[1].children[2].children[3];r.on(cf,"mouseup",function(i){if(i.button==2){aq(i)}});r.on(cf,"contextmenu",function(i){b0(i)});r.on(this._zoomDom.children[3].children[0],"click",function(i){ci._map.zoomTo(18)});r.on(this._zoomDom.children[3].children[1],"click",function(i){ci._map.zoomTo(12)});r.on(this._zoomDom.children[3].children[2],"click",function(i){ci._map.zoomTo(8)});r.on(this._zoomDom.children[3].children[3],"click",function(i){ci._map.zoomTo(4)});r.on(cj,"mousedown",function(ck){ck=window.event||ck;var i=ck.offsetY||ck.layerY||0;var cl=0;cl=(ci._maxZoomLevel+1)-Math.round(ci._totalZoomLv*parseFloat(i/(ci._totalZoomLv*ci._sliderInterval)));ci._map.zoomTo(cl);ca?H(6006):null});r.on(cf,"mouseover",function(){r.ac(cf,"h")});r.on(cf,"mouseout",function(){if((ci._map.currentOperation&aO.stdMapCtrlDrag)==0){r.rc(cf,"h")}});var ce=function(i){var i=window.event||i;if(i.button==2){return}if((r.Browser.ie&&i.button!=1)){return}if(cf.setCapture){cf.setCapture()}ci._map.currentOperation|=aO.stdMapCtrlDrag;ci._bind.my=i.pageY||i.clientY||0;if(!r.Browser.opera){ci._setSliderBarCursor(bu.draggingCursor)}r.on(document,"mousemove",e);r.on(document,"mouseup",b7);aq(i);return b0(i)};var e=function(ck){if((ci._map.currentOperation&aO.stdMapCtrlDrag)!=0){var ck=window.event||ck;var cl=ck.pageY||ck.clientY;var i=ci._curBarY-cl+ci._bind.my;if(i<ci._minBarY){i=ci._minBarY}else{if(i>ci._maxBarY){i=ci._maxBarY}}cf.style.top=(ci._sliderHeight-i-15)+"px";ci._sliderBotDom.style.height=i+"px"}};var b7=function(ck){if((ci._map.currentOperation&aO.stdMapCtrlDrag)!=0){var i=r.G(cf);ci._curBarY=parseInt(i.style.top);r.rc(cf,"h");ci._map.currentOperation&=~aO.stdMapCtrlDrag;if(ch&&cf&&cf.releaseCapture){cf.releaseCapture()}if(!r.Browser.opera){ci._setSliderBarCursor(bu.defaultCursor)}var cl=(ci._maxZoomLevel+1)-Math.round(parseFloat(ci._curBarY-ci._minBarY)/parseFloat(ci._maxBarY-ci._minBarY)*(ci._totalZoomLv-1)+1);ci._map.zoomTo(cl);ca?H(6006):null;r.un(document,"mousemove",e);r.un(document,"mouseup",b7)}};r.on(cf,"mousedown",ce)},_setSliderBarCursor:function(e){this._container.children[1].children[2].children[3].style.cursor=e},_panBy:function(i,e){this._map.panBy(i,e)},_zoomIn:function(){this._map.zoomIn()},_zoomOut:function(){this._map.zoomOut()},_deepZoomOut:function(){this._map.deepZoomMedia(-1)},_deepZoomIn:function(){this._map.deepZoomMedia(1)},_setSliderZoomLv:function(i){if(!this._container||(this.getType()!=BMAP_NAVIGATION_CONTROL_LARGE&&this.getType()!=BMAP_NAVIGATION_CONTROL_ANIM)){return}var e=(i-this._minZoomLevel)*this._sliderInterval+this._minBarY;this._curBarY=e>this._maxBarY?this._maxBarY:e<this._minBarY?this._minBarY:e;this._container.children[1].children[2].children[3].style.top=(this._sliderHeight-this._curBarY-15)+"px";this._sliderBotDom.style.height=this._curBarY+"px"},_hideLevelHint:function(e){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){r.rc(this._container.children[1].children[3],"hvr")}}if(e&&this._hideTimerId){clearTimeout(this._hideTimerId);this._hideTimerId=null}},_showLevelHint:function(){if(this._opts.type==BMAP_NAVIGATION_CONTROL_LARGE||this._opts.type==BMAP_NAVIGATION_CONTROL_ANIM){if(this._container){r.ac(this._container.children[1].children[3],"hvr")}}},_expandSlider:function(){if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM&&!this._zoomExpanded){var e=this;new l({duration:200,transition:Z.easeInCubic,render:function(i){var b7=Math.round(i*e._sliderHeight);e._sliderDom.style.top=24-e._sliderHeight+b7+"px";e._btnZoomOut.style.top=24+b7+"px";e._container.style.height=47+b7+"px";e._zoomDom.style.height=47+b7+"px"},finish:function(i){e._zoomExpanded=true;e._showLevelHint()}})}},_shrinkSlider:function(){if(this.getType()==BMAP_NAVIGATION_CONTROL_ANIM&&this._zoomExpanded){var e=this;new l({duration:200,transition:Z.easeInCubic,render:function(i){var b7=Math.round(i*e._sliderHeight);e._sliderDom.style.top=24-b7+"px";e._btnZoomOut.style.top=24+e._sliderHeight-b7+"px";e._container.style.height=47+e._sliderHeight-b7+"px";e._zoomDom.style.height=47+e._sliderHeight-b7+"px"},finish:function(i){e._zoomExpanded=false}})}},show:function(){bE.prototype.show.call(this);if(r.Browser.ie<8){var e=this;setTimeout(function(){e.setType(e._opts.type)},1)}}});r.extend(a8.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(e){bE.prototype.initialize.call(this,e);this._render();this._setParam();this._updateScale();this._bind(e);return this._container},_setParam:function(){this._numberArray={us:[5280*5000,5280*2500,5280*2000,5280*1000,5280*500,5280*200,5280*100,5280*50,5280*25,5280*20,5280*10,5280*5,5280*2,5280,2000,1000,500,200,100,50,20,10,5],metric:[10000000,5000000,2000000,1000000,500000,200000,100000,50000,25000,20000,10000,5000,2000,1000,500,200,100,50,20,10,5,2,1]}},_bind:function(i){var e=this;i.addEventListener("zoomend",function(b7){e._updateScale()});i.addEventListener("load",function(b7){e._updateScale()});i.addEventListener("moveend",function(b7){e._updateScale()})},_render:function(){bE.prototype._render.call(this);r.ac(this._container,"BMap_scaleCtrl");this._container.innerHTML=this._generateHTML();this._container.style.WebkitTextSizeAdjust="none";this.setColor(this._opts.color);this._scaleText=this._container.children[0];bE.prototype._setPosition.call(this);if(this.sateMapStyle){this.addSateMapStyle()}},_generateHTML:function(){var e=\'<div class="BMap_scaleTxt" unselectable="on"></div><div class="BMap_scaleBar BMap_scaleHBar"><img src="\'+bu.imgPath+\'mapctrls.png?v=20111115" /></div><div class="BMap_scaleBar BMap_scaleLBar"><img src="\'+bu.imgPath+\'mapctrls.png?v=20111115" /></div><div class="BMap_scaleBar BMap_scaleRBar"><img src="\'+bu.imgPath+\'mapctrls.png?v=20111115" /></div>\';return e},setColor:function(e){this._opts.color=e+"";if(!this._container){return}this._container.children[0].style.backgroundColor="transparent";this._container.children[0].style.color=e;for(var b8=1,b7=this._container.children.length;b8<b7;b8++){this._container.children[b8].style.backgroundColor=e}},setUnit:function(e){this._opts.unit=this._units[e]&&this._units[e].name||this._opts.unit;if(!this._map){return}this._updateScale()},_setScaleText:function(i,e){if(typeof i!="number"||typeof e!="string"){return}this._scaleText.innerHTML=i+"&nbsp;"+e},_updateScale:function(){if(!this._map||!this._container){return}var i=500000;var b9=new bv(this._map.getCenter().lng,this._map.getCenter().lat+i);var ca=Math.abs(this._map.pointToPixel(this._map.getCenter()).y-this._map.pointToPixel(b9).y);var ce=aE.getDistanceByMC(this._map.getCenter(),b9)/ca;if(ce==0||isNaN(ce)){return}var cc=this._convertUnit(ce,this._opts.unit);var e=0;var b7=this._units[this._opts.unit].incon;var cb=this._map.getZoom();var b8=this._numberArray[this._opts.unit][this._map.getZoom()-1];e=b8/cc;var cd=b8>=b7?this._units[this._opts.unit].u2:this._units[this._opts.unit].u1;if(b8>=b7){b8=Math.round(b8/b7)}this._setScaleText(b8,cd);if(Math.round(e)%2!=0&&r.Browser.ie==6){e=e+1}this._container.style.width=Math.round(e)+"px"},_convertUnit:function(e,i){i=i||"metric";if(this._units[i]){return e*this._units[i].conv}return e}});var aA=new String(bu.imgPath+"maptype.png?20150903");aA.toCss=function(e,b7){e=typeof e==="number"?e+"px ":"";b7=typeof b7==="number"?b7+"px ":"";var i="transparent url("+this+") no-repeat "+e+b7;return i};var b=[[0,-138],[-11,-138]];b.toCss=function(i){var e=this[Number(i)];return e[0]+"px "+e[1]+"px"};var bM={B_EARTH_MAP:{text:"3D地图",title:"显示3D地图",file:aA,x:0,y:-92,right:0},B_SATELLITE_MAP:{text:"卫星",title:"显示卫星地图",file:aA,x:0,y:-46,right:0},B_NORMAL_MAP:{text:"地图",title:"显示普通地图",file:aA,x:0,y:0,right:0}};var bF={B_NORMAL_MAP:{first:"B_SATELLITE_MAP",second:"B_EARTH_MAP",showMenu:false},B_SATELLITE_MAP:{first:"B_NORMAL_MAP",second:"B_EARTH_MAP",showMenu:true},B_EARTH_MAP:{first:"B_SATELLITE_MAP",second:"B_NORMAL_MAP",showMenu:true}};var ak=["B_NORMAL_MAP","B_SATELLITE_MAP","B_EARTH_MAP"];var B={HIGHLIGHT:"#0c88e8",NORMAL:"#ffffff",HIGHLIGHT_TEXT:"#ffffff",NORMAL_TEXT:"#666666"};r.extend(ao.prototype,{_asyncDraw:function(){if(this._map){this._i(this._map)}},initialize:function(cn){bE.prototype.initialize.call(this,cn);bE.prototype._render.call(this);bE.prototype._setPosition.call(this);this.mapTypeButtons={};var ca=B;var b8={top:"0px",cursor:"pointer",width:"49px",height:"46px",zIndex:"800",display:"inline-block",position:"absolute",fontSize:"12px",backgroundColor:"#fff"};var b7={width:"49px",height:"46px",position:"absolute"};var co={position:"absolute",top:"28px",left:"2px",width:"45px",height:"16px",backgroundColor:ca.NORMAL,opacity:"0.8",filter:"Alpha(opacity=80);"};var cf={position:"absolute",top:"30px",left:"2px",width:"45px",color:"#666666",textAlign:"center",lineHeight:"12px"};if(r.isIE>0&&r.isIE<=8){cf.lineHeight="15px"}r.extend(this._container.style,{top:"10px",width:"49px",height:"98px"});this._container.style.background="url("+bu.imgPath+"blank.gif)";this._container.style.WebkitTransition=this._container.style.transition="top .3s ease-out";var e=J("div");this._menu=e;r.extend(e.style,{position:"absolute",width:"71px",height:"24px",border:"1px solid #ABAEB3",fontSize:"12px",bottom:"-32px",right:"0",backgroundColor:"white",display:"none",cursor:"pointer"});var cd=J("span");cd._checked=this._map.isStreetLayerShow();var cb=b[1];e._checkbox=cd;r.extend(cd.style,{background:aA.toCss(cb[0],cb[1]),width:"11px",height:"11px",position:"absolute",cssFloat:"left",top:"7px",left:"4px"});e.appendChild(cd);var ce=J("span");ce.innerHTML="显示路网";r.extend(ce.style,{position:"absolute",top:"5px",marginLeft:"18px"});e.appendChild(ce);ce.onmouseover=aq;ce.onmouseout=aq;e.onmouseover=aq;e.onmouseout=aq;this._container.appendChild(e);for(var ch=0,cj=ak.length;ch<cj;++ch){var cp=ak[ch];var b9=bM[cp];var ci=J("div");ci.title=b9.title;ci._name=cp;r.extend(ci.style,b9);r.extend(ci.style,b8);var cg=J("div");cg.style.position="absolute";cg.style.width="49px";cg.style.height="46px";cg.style.left=cg.style.top="0";cg.style.zIndex="999";ci._mask=cg;ci.appendChild(cg);var cc=J("span");ci._captionBg=cc;r.extend(cc.style,co);cc.onmouseover=aq;cc.onmouseout=aq;var cl=J("span");ci._innerBox=cl;r.extend(cl.style,b7);var cm=aA.toCss(b9.x,b9.y);cl.style.background=cm;var ck=J("span");ci._caption=ck;ck.innerHTML=b9.text;r.extend(ck.style,cf);ci.appendChild(cl);cl.appendChild(cc);cl.appendChild(ck);ck.onmouseover=aq;this._container.appendChild(ci);this.mapTypeButtons[cp]=ci}this._bind(cn);this.updateUI(this._map.mapType);return this._container},_bind:function(i){var e=this;this._container.ondblclick=aq;this.mapTypeButtons.B_NORMAL_MAP._mask.onclick=function(){e._map.setMapType("B_NORMAL_MAP")};this.mapTypeButtons.B_SATELLITE_MAP._mask.onclick=function(){e._map.setMapType("B_SATELLITE_MAP")};this.mapTypeButtons.B_EARTH_MAP._mask.onclick=function(){e._map.setMapType("B_EARTH_MAP")};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_NORMAL_MAP)};this.mapTypeButtons.B_SATELLITE_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_SATELLITE_MAP)};this.mapTypeButtons.B_EARTH_MAP._mask.onmouseover=function(){e._dehighlightAll();e._highlight(e.mapTypeButtons.B_EARTH_MAP)};this.mapTypeButtons.B_NORMAL_MAP._mask.onmouseout=this.mapTypeButtons.B_SATELLITE_MAP._mask.onmouseout=this.mapTypeButtons.B_EARTH_MAP._mask.onmouseout=function(){e._dehighlightAll()};this._menu.onclick=function(b7){e._map.showStreetLayer(!e._menu._checkbox._checked);aq(b7);return false};this._menu.ondblclick=aq;i.addEventListener("onmaptypechange",function(b7){e.updateUI(this.mapType)});i.addEventListener("onstreetlayer_show",function(b7){e._menu._checkbox._checked=true;e._menu._checkbox.style.backgroundPosition=b.toCss(true)});i.addEventListener("onstreetlayer_hide",function(b7){e._menu._checkbox._checked=false;e._menu._checkbox.style.backgroundPosition=b.toCss(false)});i.addEventListener("forceenableearth",function(b7){if(this.config.enableEarth){e.showButton("B_EARTH_MAP")}})},updateUI:function(b7){this.hideButton(b7);var ca=bF[b7];var b8=this.mapTypeButtons[ca.first];b8.style.top="0";this.showButton(ca.first);var e=this.mapTypeButtons[ca.second];e.style.top="50px";this.showButton(ca.second);if(b7!=="B_NORMAL_MAP"){var i=this._map.isStreetLayerShow();var b9=this._menu;b9._checkbox._checked=i;b9._checkbox.style.backgroundPosition=b.toCss(i);b9.style.display="";if(this._map.config.enableEarth){b9.style.bottom="-32px"}else{b9.style.bottom="20px"}}else{this._menu.style.display="none"}if(!this._map.config.enableEarth){this.hideButton("B_EARTH_MAP")}},remove:function(){var b8=this.mapTypeButtons;for(var b7=0,e=b8.length;b7<e;++b7){b8[b7]=null}bE.prototype.remove.call(this)},hideButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="hidden"}},showButton:function(i){var e=this.mapTypeButtons[i];if(!e){return}if(e.style){e.style.visibility="visible"}},isButtonVisible:function(i){var e=this.mapTypeButtons[i];if(!e){return}return e.style.visibility==="visible"},_highlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=B.HIGHLIGHT;e._captionBg.style.opacity="1";e._captionBg.style.filter="";e._caption.style.color=B.HIGHLIGHT_TEXT},_dehighlight:function(e){if(!e){return}e._captionBg.style.backgroundColor=B.NORMAL;e._captionBg.style.opacity="0.8";e._captionBg.style.filter="Alpha(opacity=80);";e._caption.style.color=B.NORMAL_TEXT},_dehighlightAll:function(){this._dehighlight(this.mapTypeButtons.B_NORMAL_MAP);this._dehighlight(this.mapTypeButtons.B_EARTH_MAP);this._dehighlight(this.mapTypeButtons.B_SATELLITE_MAP)}});');
