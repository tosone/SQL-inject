_jsload&&_jsload('marker', 'r.extend(I.prototype,{initialize:function(e){this.map=e;this._addDom();this._bind();this.domElement.hashCode=this.hashCode;r.BaseClass.call(this,this.hashCode);if(!this._visible){r.hide(this.domElement)}this.dispatchEvent(new aM("ondomready"));return this.domElement},_bind:function(){if(!this.domElement){return}var e=this;var b7=this.map;function i(cb,ca){var b9=cb.srcElement||cb.target;var b8=cb.clientX||cb.pageX;var cd=cb.clientY||cb.pageY;if(cb&&ca&&b8&&cd&&b9){var cc=r.Dom.getOffset(b7.container);ca.pixel=new aT(b8-cc.left,cd-cc.top);ca.point=b7.pixelToPoint(ca.pixel);return ca}else{return ca}}r.on(this.domElement,"mouseover",function(b8){if(!e._dragstarted){e.dispatchEvent(i(b8,new aM("onmouseover").inherit(b8)))}});r.on(this.domElement,"mouseout",function(b8){if(!e._dragstarted){e.dispatchEvent(i(b8,new aM("onmouseout").inherit(b8)))}});r.on(this.domElement,"touchstart",function(b8){e._bind._touchStartPos=new aT(b8.changedTouches[0].clientX,b8.changedTouches[0].clientY)});r.on(this.domElement,"touchend",function(ca){var b9=new Date().getTime(),b8=new aT(ca.changedTouches[0].clientX,ca.changedTouches[0].clientY);if(b8.x!=e._bind._touchStartPos.x||b8.y!=e._bind._touchStartPos.y){e._bind._touchStartPos=null;return}e.dispatchEvent(i(ca,new aM("onclick").inherit(ca)));if(b9-e._dblclickTime<e.map.config.clickInterval){e.dispatchEvent(i(ca,new aM("ondblclick").inherit(ca)))}e._dblclickTime=b9});r.on(this.domElement,"click",function(b9){var b8=b9.srcElement||b9.target;while(b8){if(b8==e.domElement){if(e.toString()!="Marker"||e.toString()=="Marker"&&(!e._lastPt||e._lastPt&&e.getPoint().equals(e._lastPt))){if(e.addStat&&typeof e.addStat==="function"){e.addStat()}e.dispatchEvent(i(b9,new aM("onclick").inherit(b9)))}break}else{if(e.map&&e.map.infoWindowDoms&&b8==e.map.infoWindowDoms.popDom){break}}b8=b8.parentNode}});r.on(this.domElement,"mousedown",function(b8){if(e.toString()=="Marker"){e._lastPt=e.getPoint()}e.dispatchEvent(i(b8,new aM("onmousedown").inherit(b8)))});r.on(this.domElement,"mouseup",function(b8){e.dispatchEvent(i(b8,new aM("onmouseup").inherit(b8)))});r.on(this.domElement,"dblclick",function(b8){e.dispatchEvent(i(b8,new aM("ondblclick").inherit(b8)));bD(b8)});r.on(this.domElement,"contextmenu",function(b8){e.dispatchEvent(i(b8,new aM("onrightclick").inherit(b8)))})},hide:function(){if(this._visible==false){return}this._visible=false;a0.prototype.hide.call(this);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay==this){this.closeInfoWindow()}},show:function(){if(this._visible==true){return}this._visible=true;a0.prototype.show.call(this)},setStyle:function(e){if(this.domElement){if(this.siblingElement){this.siblingElement.style.cssText=this.siblingElement.style.cssText+";"+e}else{this.domElement.style.cssText=this.domElement.style.cssText+";"+e}}},setConfig:function(i){if(!i){return}for(var e in i){if(typeof(this._config[e])==typeof(i[e])){this._config[e]=i[e]}}},getPoint:function(b7,b8){if(!b7){return this.point}else{var e=b8?b8.width:0;var b9=b8?b8.height:0;if(this.map){var i=this.map.pointToPixel(this.point);if(this._config&&this._config.offset){i.x=i.x+this._config.offset.width+e;i.y=i.y+this._config.offset.height+b9}else{i.x=i.x+e;i.y=i.y+b9}return this.map.pixelToPoint(i)}}},setZIndex:function(e){var i=this;i.zIndex=e;i._updateDomZIndex()},_updateDomZIndex:function(){var i=this,e;if(typeof i.zIndex!="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){var b7=i.getPoint()?i.getPoint().lat:0;e=a0.getZIndex(b7,i.map.config.coordType)+(i._config.baseZIndex||0)}}if(i.domElement){i.domElement.style.zIndex=e}},isVisible:function(){if(!this.domElement){return false}return !!this._visible}});L.TOP_ZINDEX=a0.getZIndex(-90)+1000000;L.DRAG_ZINDEX=L.TOP_ZINDEX+1000000;window.BMAP_ANIMATION_RAISEUP=3;window.BMAP_ANIMATION_DROPDOWN=4;L._addDragCrossImg=function(b7,e){if(!L._dragCrossImg){L._dragCrossImg=J("img",{src:bu.imgPath+"drag_cross.png",width:13,height:9});L._dragCrossImg.style.position="absolute";if(r.Browser.ie==6){delete L._dragCrossImg;var b8=L._dragCrossImg=J("div");var i=b8.style;i.position="absolute";i.width="13px";i.height="9px";i.filter=\'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src="\'+bu.imgPath+\'drag_cross.png")\'}}var i=L._dragCrossImg.style;i.left=b7.width-6+"px";i.top=b7.height-5+"px";e.appendChild(L._dragCrossImg)};L._removeDragCrossImg=function(){if(L._dragCrossImg&&L._dragCrossImg.parentNode){L._dragCrossImg.parentNode.removeChild(L._dragCrossImg)}};r.extend(L.prototype,{initialize:function(i){I.prototype.initialize.call(this,i);if(!this._visible){r.hide(this.siblingElement)}this.setPoint(this.point);this.setIcon(this._config.icon,this._config.startAnimation);this.setLabel(this._config.label);this.setTitle(this._config.title);this._initDrag();var e=this;if(r.Browser.ie){i.addEventListener("zoomend",function(){setTimeout(function(){if(e.getLabel()&&!e.getLabel().isVisible()){e.getLabel().show();e.getLabel().hide()}},30)});i.addEventListener("load",function(){setTimeout(function(){if(e.getLabel()&&!e.getLabel().isVisible()){e.getLabel().show();e.getLabel().hide()}},30)})}return this.domElement},_addDom:function(){var e=this.map;this.domElement=W(e.getPanes().markerMouseTarget,this._msTargetRender());this.siblingElement=W(e.getPanes().markerPane,this._markerRender());this.siblingElement.hashCode=this.getHashCode()},_msTargetRender:function(){var e=[\'<span class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(this._config.title?\'title="\'+this._config.title+\'"\':\'"\');e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("background:url("+bu.imgPath+"blank.gif);");e.push("width:"+this._config.icon.size.width+"px;");e.push("height:"+this._config.icon.size.height+"px;");e.push(\'"></span>\');return e.join("")},_markerRender:function(){var e=[\'<span class="BMap_Marker" unselectable="on" \'];e.push(\'style="position:absolute;padding:0;margin:0;border:0;\');e.push(\'width:0;height:0;-moz-user-select:none"></span>\');return e.join("")},draw:function(){if(this.domElement){var e=this._getPixPos();if(!e.onBack){if(this._hideByOnBack){this.show()}this.domElement.style.left=e.x+"px";this.domElement.style.top=e.y+"px";if(this.siblingElement){this.siblingElement.style.left=e.x+"px";this.siblingElement.style.top=e.y+"px"}if(this.infoWindow!=null&&this.infoWindow.isOpen()){this.infoWindow.setPosition()}this._updateDomZIndex()}else{if(this._visible===true){this._hideByOnBack=true}this.hide()}}},_getPixPos:function(){var b7=this._config.offset||new aj(0,0);var i=this._config.icon.offset||new aj(0,0);var e=this.map.pointToOverlayPixel(this.getPoint());e.x+=b7.width-i.width;e.y+=b7.height-i.height;return e},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},remove:function(){if(this.siblingElement&&this.siblingElement.parentNode){this.siblingElement.parentNode.removeChild(this.siblingElement)}if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.infoWindow=null}this.siblingElement=null;this.iconDom=null;if(this._config.label){this._config.label.setMarker(null);this._config.label.domElement=null;this._config.label=null}I.prototype.remove.call(this)},hide:function(){I.prototype.hide.call(this);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay==this){this.closeInfoWindow()}r.hide(this.domElement);r.hide(this.siblingElement)},show:function(){I.prototype.show.call(this);r.show(this.domElement);r.show(this.siblingElement);if(r.Browser.ie){if(this.getLabel()&&!this.getLabel().isVisible()){this.getLabel().show();this.getLabel().hide()}}},setIcon:function(b9,b8){if(!b9||b9.toString()!="Icon"){return}this._config.icon=b9;if(!this.map||!this.domElement||!this.siblingElement){return}var cb=this.map;try{if(this.iconDom){this.siblingElement.removeChild(this.iconDom);this.iconDom=null}this.domElement.style.width=b9.size.width+"px";this.domElement.style.height=b9.size.height+"px"}catch(ca){}if(this._config.icon){var i=this.iconDom=J("div",{"class":b8||""});var b7=i.style;b7.position="absolute";b7.padding=b7.margin="0";b7.width=b9.size.width+"px";b7.height=b9.size.height+"px";b7.overflow="hidden";i.innerHTML=b9.getHTML();i.galleryImg=false;this.siblingElement.appendChild(this.iconDom)}this.draw()},getIcon:function(){return this._config.icon},setLabel:function(e){if(!e||e.toString()!="Label"){return}this._config.label=e;var b7=this;if(!this._config.label._binded){this._config.label._binded=true;this._config.label.addEventListener("remove",function(){b7._config.label=null})}if(!this.map){return}e._i(this.map);if(e.domElement){this.siblingElement.appendChild(e.domElement)}else{e.domElement=W(this.domElement,e.render());e.domElement.hashCode=e.getHashCode()}var i=e.domElement.style;i.left=(e._config.offset.width)+"px";i.top=(e._config.offset.height)+"px";e.setMarker(this)},getLabel:function(){return this._config.label},_initDrag:function(){if(!this.domElement||this.domElement._binded){return}this.domElement._binded=true;var cb=this.map,b8=this,e=0,cc=0,b7=0,ca={x:0,y:0};function b9(ce,cd){cd.pixel=ce.pixel;cd.point=ce.point;return cd}function i(cf){var ce=cf.clientX,cd=cf.clientY;if(cf.changedTouches){ce=cf.changedTouches[0].clientX;cd=cf.changedTouches[0].clientY}return new aT(ce,cd)}this.dragStart=function(cf){if(!b8._config.enableDragging){return}b8._isDragging=true;var ce=cb.pointToPixel(b8.point);var cd=i(cf);e=cd.x-ce.x;cc=cd.y-ce.y;b7=new Date().getTime();if(b8.map){b8.map.temp._draggingMarker=b8}r.on(document,"mousemove",b8.dragIng);r.on(document,"mouseup",b8.dragEnd);r.on(document,"touchmove",b8.dragIng);r.on(document,"touchend",b8.dragEnd);if(b8.domElement&&b8.domElement.setCapture){b8.domElement.setCapture()}};this.dragIng=function(ch){if(!b8._isDragging){return}var ce=i(ch);var cf=new aT((ce.x-e),(ce.y-cc));ca=cf;b8._draggingMovePixel=cf;if((b8._config.restrictDraggingArea&&(cf.x>15&&cf.x<b8.map.width-15)&&(cf.y>30&&cf.y<b8.map.height-15))||!b8._config.restrictDraggingArea){var cd=b8.map.pixelToPoint(cf),cg={pixel:cf,point:cd};b8._panByX=b8._panByY=0;if(cf.x<=20||cf.x>=b8.map.width-20||cf.y<=50||cf.y>=b8.map.height-10){if(cf.x<=20){b8._panByX=8}else{if(cf.x>=b8.map.width-20){b8._panByX=-8}}if(cf.y<=50){b8._panByY=8}else{if(cf.y>=b8.map.height-10){b8._panByY=-8}}if(!b8._draggingMoveTimer){b8._draggingMoveTimer=setInterval(function(){cb.panBy(b8._panByX,b8._panByY,null,true);var ci=cb.pixelToPoint(b8._draggingMovePixel);b8.setPoint(ci)},30)}}else{if(b8._draggingMoveTimer){clearInterval(b8._draggingMoveTimer);b8._draggingMoveTimer=null}b8.setPoint(cd)}if(!b8._dragstarted){b8.dispatchEvent(b9(cg,new aM("ondragstart").inherit(ch)));b8._dragstarted=true;if(b8._config.raiseOnDrag){b8.setAnimation(BMAP_ANIMATION_RAISEUP);L._addDragCrossImg(b8._config.icon.offset,b8.siblingElement)}}b8.dispatchEvent(b9(cg,new aM("ondragging").inherit(ch)))}};this.dragEnd=function(cd){if(b8.domElement&&b8.domElement.releaseCapture){b8.domElement.releaseCapture()}b8._isDragging=false;if(b8.map){b8.map.temp._draggingMarker=null}r.un(document,"mousemove",b8.dragIng);r.un(document,"mouseup",b8.dragEnd);r.un(document,"touchmove",b8.dragIng);r.un(document,"touchend",b8.dragEnd);e=cc=0;if(b8._draggingMoveTimer){clearInterval(b8._draggingMoveTimer);b8._draggingMoveTimer=null}if(ca.x>2||ca.y>2){b8._dragstarted=false;b8.dispatchEvent(b9({pixel:b8.map.pointToPixel(b8.getPoint()),point:b8.getPoint()},new aM("ondragend").inherit(cd)));if(b8._config.raiseOnDrag){b8.setAnimation(BMAP_ANIMATION_DROPDOWN);L._removeDragCrossImg()}ca.x=ca.y=0}b8._updateDomZIndex()};r.on(this.domElement,"mousedown",this.dragStart);r.on(this.domElement,"touchstart",this.dragStart)},enableDragging:function(e){this._config.enableDragging=true},disableDragging:function(){this._config.enableDragging=false},setPoint:function(e){if(e&&e.toString()=="Point"){this.point=this._config.point=new bv(e.lng,e.lat);this.draw()}},_updateDomZIndex:function(){var i=this,e;if(i._isDragging==true){e=L.DRAG_ZINDEX}else{if(i._config.isTop==true){e=L.TOP_ZINDEX+(i._addi||0)}else{if(typeof i.zIndex!="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){e=a0.getZIndex(i.getPoint().lat,i.map.config.coordType)+i._config.baseZIndex}}}}if(i.domElement){i.domElement.style.zIndex=e}if(i.siblingElement){i.siblingElement.style.zIndex=e}},setTop:function(i,e){this._config.isTop=!!i;if(i){this._addi=e||0}this._updateDomZIndex()},setTitle:function(e){this._config.title=e;if(this.domElement){this.domElement.title=e||""}},getTitle:function(){return this._config.title||""},setOffset:function(e){if(!e||e.toString()!="Size"){return}this._config.offset=e;this.setPoint(this.getPoint())},getOffset:function(){return this._config.offset},setAnimation:function(i){var e=this;bY.load("markeranimation",function(){e._setAnimation(i)},true)},_setAnimation:function(i){if(!this.iconDom){return}this._clearAnimation(i!=null);var e=bp[i];if(!e){return}this._execJSAnimation(i)},_clearAnimation:function(i){if(i){if(this._aniObj){this._aniObj.stop();this._aniObj=null}this.iconDom.style.top=this.iconDom.style.left="0px";if(this.shadowDom){this.shadowDom.style.top=this.shadowDom.style.left="0px"}}else{if(this._aniObj){var e=this;this._aniObj.setFinishCallback(function(){e._aniObj=null})}}},_execJSAnimation:function(ca){var cc=this.iconDom.style;var e=false;var b9;if(this.shadowDom){e=true;b9=this.shadowDom.style}var b7=bp[ca];var ce=this;var cd=b7.iconAnis.length,ch=b7.options.duration,cg=ce._aniObj=new l({duration:0,delay:l.INFINITE});var cf=b7.iconAnis;var b8=b7.shadowAnis;cc.top=cf[0].translate[1]+"px";if(e){b9.left=b8[0].translate[0]+"px";b9.top=b8[0].translate[1]+"px"}for(var cb=1;cb<cd;cb++){(function(){var cm=[cf[cb].translate[0]-cf[cb-1].translate[0],cf[cb].translate[1]-cf[cb-1].translate[1]];var cl=[cf[cb-1].translate[0],cf[cb-1].translate[1]];if(e){var cj=[b8[cb].translate[0]-b8[cb-1].translate[0],b8[cb].translate[1]-b8[cb-1].translate[1]];var ci=[b8[cb-1].translate[0],b8[cb-1].translate[1]]}var ck=Z[cf[cb-1].timingFunc];var i=function(){};if(cb==cd-1){if(b7.options.loop!=l.INFINITE){i=function(){ce._aniObj=null}}else{i=function(){ce._aniObj.start()}}}cg.add(new l({duration:(b7.iconAnis[cb].percent-cf[cb-1].percent)*ch,fps:40,delay:l.INFINITE,transition:ck,render:function(cn){if(ce.iconDom){ce.iconDom.style.top=cl[1]+Math.round(cn*cm[1])+"px"}if(e&&ce.shadowDom){ce.shadowDom.style.left=ci[0]+Math.round(cn*cj[0])+"px";ce.shadowDom.style.top=ci[1]+Math.round(cn*cj[1])+"px"}},finish:i}))})()}cg.start()}});var aY=D.prototype;aY.getHTML=function(){if(r.Browser.ie==6&&this.imageUrl.toLowerCase().indexOf(".png")>0){var e=["<div"];if(this.printImageUrl){e.push(\' class="BMap_noprint"\')}e.push(\' style="width: 1px; height: 1px;\');e.push("; left:"+this.imageOffset.width+"px");e.push("; top:"+this.imageOffset.height+"px");e.push("; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src=\'"+this.imageUrl+"\')");e.push(\'; position:absolute;"></div>\');if(this.printImageUrl){e.push(\'<img class="BMap_noscreen" style="left:\'+this.imageOffset.width+"px;");e.push("top:"+this.imageOffset.height+\'px;position:absolute" src="\'+this.printImageUrl+\'" />\')}return e.join("")}else{e=[];e.push(\'<img src="\'+this.imageUrl+\'" \');if(this.srcSet){e.push(\'srcset="\'+this.srcSet+\'" \')}if(this.imageSize){this.imageSize.width&&e.push(\'width="\'+this.imageSize.width+\'px" \');this.imageSize.height&&e.push(\'height="\'+this.imageSize.height+\'px" \')}e.push(\'style="left:\'+this.imageOffset.width+"px");e.push("; top:"+this.imageOffset.height+"px");e.push(\'; position:absolute;" />\');return e.join("")}};r.extend(N.prototype,{_addDom:function(){var i=this._config;var b8=this.content;var e=J("label",{"class":"BMapLabel",unselectable:"on"});if(i.title){e.title=i.title}var b7=e.style;b7.position="absolute";b7.MozUserSelect="none";if(i.width==0||i.width=="auto"){b7.display="inline"}else{b7.width=i.width+"px";b7.display="block";b7.overflow="hidden"}if(!r.Browser.ie){b7.cursor="inherit"}e.innerHTML=b8;this.map.getPanes().labelPane.appendChild(e);this.domElement=e;this.setStyle(this._config.styles);return e},setPoint:function(e){if(e&&e.toString()=="Point"&&!this.getMarker()){this.point=this._config.point=new bv(e.lng,e.lat);this.draw()}},draw:function(){if(this.domElement&&this.getPoint()&&!this.getMarker()){var i=this._config.offset||new aj(0,0);var e=this.map.pointToOverlayPixel(this.getPoint());if(!e.onBack){if(this._hideByOnBack){this.show()}this.domElement.style.left=(e.x+i.width)+"px";this.domElement.style.top=(e.y+i.height)+"px";this._updateDomZIndex()}else{if(this._visible===true){this._hideByOnBack=true}this.hide()}}},_draw:function(){if(this.map&&!this._marker){this.domElement=this.initialize(this.map);this.draw()}},setContent:function(e){this.content=e;if(this.domElement){this.domElement.innerHTML=e}},setOpacity:function(e){if(e>=0&&e<=1){this._config.opacity=e}if(this.domElement){Q(this.domElement,e)}},setOffset:function(e){if(!e||e.toString()!="Size"){return}this._config.offset=new aj(e.width,e.height);if(this.getMarker()&&this.domElement){this.domElement.style.left=e.width+"px";this.domElement.style.top=e.height+"px"}else{this.draw()}},setStyle:function(i){i=i||{};this._config.styles=r.extend(this._config.styles,i);if(this.domElement){for(var b8 in i){try{this.domElement.style[b8]=i[b8]}catch(b7){}}}},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}}});');
﻿_jsload&&_jsload('menu', 'r.extend(bX.prototype,{initialize:function(e){if(this._container){return false}this._map=e;this._render();var cc=this;this._container.style.cursor=e.config.defaultCursor;this._shadow.style.cursor=this._container.style.cursor;r.on(document,"mousedown",function(i){if(!cc._container){return}cc.hide()});r.on(this._container,"click",function(i){cc.hide();aq(i)});var cb=this._opts.container;if(!cb){cb=this._map.container;e.addEventListener("rightclickex",function(i){if(this.getMapType()===BMAP_EARTH_MAP){return}if(i.overlay&&i.overlay instanceof bC){cc._showMenu(i,cb)}if(!cc._container||i.overlay||i.infoWindow||!cc._enable){return}cc._showMenu(i,cb)})}else{r.on(cb,"contextmenu",function(cg){if(e.getMapType()===BMAP_EARTH_MAP){return}if(!cc._container||!cc._enable){return}cg=window.event||cg;var i=cg.target||cg.srcElement;while(i&&!r.hc(i,"pop")){i=i.parentNode}if(i&&r.hc(i,"pop")){cc.hide();return}cc._showMenu(cg,cb,true);return b0(cg)})}var ce=[];for(var b9=this._items.length-1;b9>=0;b9--){var cf=this._items[b9];if(cf._insertIndex!==-1){ce=ce.concat(this._items.splice(b9,1))}}for(var b9=0,b7=this._items.length;b9<b7;b9++){var cf=this._items[b9];if(cf._type==="menuitem"){cf.initialize(e,this)}if(cf._type==="divider"){this._dividers[cf._dIndex].dom=W(this._container,"<div class=\'BMap_cmDivider\'></div>")}}for(var b9=ce.length-1;b9>=0;b9--){var cf=ce[b9];if(cf._type==="menuitem"){cf.initialize(e,this)}if(cf._type==="divider"){for(var b8=0,cd=this._items.length;b8<cd;b8++){if(b8===cf._insertIndex){var ca=this._items[b8]._container||this._dividers[this._items[b8]._dIndex].dom;this._dividers[cf._dIndex].dom=P(ca,"<div class=\'BMap_cmDivider\'></div>");break}}}}for(var b9=ce.length-1;b9>=0;b9--){var cf=ce[b9];this._items.splice(cf._insertIndex,0,cf)}this._updateShadowSize()},_draw:function(){if(this._map){this.initialize(this._map);if(this._isOpen){this._isOpen=false;this.show()}}},remove:function(){if(this._container){this._container.parentNode.removeChild(this._container);this._container=null}if(this._shadow){this._shadow.parentNode.removeChild(this._shadow);this._shadow=null}this._map=null},_render:function(){this._container=W(this._map.container,"<div unselectable=\'on\'></div>");this._container.className="BMap_contextMenu";this._container.style.font="12px arial, simsun";this._shadow=W(this._map.container,"<div class=\'BMap_cmShadow\'></div>");return this._container},addItem:function(b9,e){if(!b9||b9._type!="menuitem"||b9._text==""||b9._width<=0){return}for(var b8=0,b7=this._items.length;b8<b7;b8++){if(this._items[b8]===b9){return}}if(e===undefined||e>this._items.length-1){e=-1}b9._insertIndex=e;b9.initialize(this._map,this);if(e===-1){this._items.push(b9);this._rItems.push(b9)}else{this._items.splice(e,0,b9);this._rItems.splice(e,0,b9)}r.ac(b9.getDom(),"BMap_cmLstItem");if(this._items.length>1){this._items[this._items.length-2]._type=="menuitem"&&r.rc(this._items[this._items.length-2].getDom(),"BMap_cmLstItem")}else{this._items[0]._type=="menuitem"&&r.ac(this._items[0].getDom(),"BMap_cmFstItem")}this._updateShadowSize()},removeItem:function(b8){if(!b8||b8._type!="menuitem"){return}for(var b7=0,e=this._items.length;b7<e;b7++){if(this._items[b7]===b8){this._items[b7].remove();this._items.splice(b7,1);delete b8._insertIndex;e--}}for(var b7=0,e=this._rItems.length;b7<e;b7++){if(this._rItems[b7]===b8){this._rItems[b7].remove();this._rItems.splice(b7,1);delete b8._insertIndex;e--}}if(!this._container){return}if(this._items.length>0){this._items[this._items.length-1]._type=="menuitem"&&r.ac(this._items[this._items.length-1].getDom(),"BMap_cmLstItem")}this._updateShadowSize()},addSeparator:function(e){if(e===undefined||e>this._items.length-1){e=-1}var cc={_type:"divider",_dIndex:this._dividers.length,_insertIndex:e};this._dividers.push({dom:null});if(!this._container){return}var cb="<div class=\'BMap_cmDivider\'></div>";if(e===-1){this._dividers[this._dividers.length-1].dom=W(this._container,cb)}else{var b9=this._items;for(var ca=0,b8=b9.length;ca<b8;ca++){if(ca===e){var b7=b9[ca]._container||this._dividers[b9[ca]._dIndex].dom;this._dividers[this._dividers.length-1].dom=P(b7,cb);break}}}if(e===-1){this._items.push(cc)}else{this._items.splice(e,0,cc)}this._updateShadowSize()},removeSeparator:function(b7){if(!this._dividers[b7]){return}if(this._dividers[b7].dom&&this._dividers[b7].dom.parentNode){this._dividers[b7].dom.parentNode.removeChild(this._dividers[b7].dom)}for(var b8=0,e=this._items.length;b8<e;b8++){if(this._items[b8]&&this._items[b8]._type=="divider"&&this._items[b8]._dIndex==b7){this._items.splice(b8,1);e--}if(this._items[b8]&&this._items[b8]._type=="divider"&&this._items[b8]._dIndex>b7){this._items[b8]._dIndex--}}this._dividers.splice(b7,1);this._updateShadowSize()},setPosition:function(e,i){this._left=e;this._top=i;this._container.style.left=e+"px";this._container.style.top=i+"px";this._shadow.style.left=e+1+"px";this._shadow.style.top=i+2+"px"},show:function(){if(this._isOpen==true){return}if(this._rItems.length==0){return}this._isOpen=true;if(this._container){this._container.style.visibility="visible"}if(this._shadow){this._shadow.style.visibility="visible"}var e=new aM("onopen");e.point=this.curPoint;e.pixel=this.curPixel;this.dispatchEvent(e)},hide:function(){if(this._isOpen==false){return}this._isOpen=false;if(this._container){this._container.style.visibility="hidden"}if(this._shadow){this._shadow.style.visibility="hidden"}var e=new aM("onclose");e.point=this.curPoint;e.pixel=this.curPixel;this.dispatchEvent(e)},setCursor:function(e){if(!e){return}this._opts.cursor=e;if(this._container){this._container.style.cursor=this._opts.cursor}if(this._shadow){this._shadow.style.cursor=this._opts.cursor}},_updateShadowSize:function(){if(this._container&&this._shadow){this._shadow.style.width=this._container.offsetWidth+"px";this._shadow.style.height=this._container.offsetHeight+"px"}},_showMenu:function(b9,cc,cb){if(this._rItems.length==0){return}var cd=this;var cf=b9.layerX||b9.offsetX;var ce=b9.layerY||b9.offsetY;var ch=b9.target||b9.srcElement;if(cb){var ca=ch;if(cc==cd._map.container&&ca!==cd._map.maskLayer&&ca.nodeName.toLowerCase()!="svg"){while(ca&&!r.hc(ca,"shadow")){ca=ca.parentNode}if(!r.hc(ca,"shadow")||ca.getAttribute("type")!="infowindow_shadow"){cd.hide();return}}while(ch&&ch!=cd._map.container){if(!(ch.clientWidth==0&&ch.clientHeight==0&&ch.offsetParent&&ch.offsetParent.nodeName.toLowerCase()=="td")){if(ch.nodeName.toLowerCase()=="svg"){cf+=parseInt(ch.getAttribute("viewBox").split(" ")[0])||0;ce+=parseInt(ch.getAttribute("viewBox").split(" ")[1])||0}else{cf+=ch.offsetLeft;ce+=ch.offsetTop}}ch=ch.offsetParent||ch.parentNode}cd.curPixel=new aT(cf,ce)}else{cd.curPixel=b9.pixel}cd.curPoint=cd._map.pixelToPoint(cd.curPixel);if(cd.curPoint.lng<bR[cd._map.mapType].bounds[0]||cd.curPoint.lng>bR[cd._map.mapType].bounds[2]||cd.curPoint.lat<bR[cd._map.mapType].bounds[1]||cd.curPoint.lat>bR[cd._map.mapType].bounds[3]){return}var b8=cd.getDom().offsetHeight;var cg=cd.getDom().offsetWidth;var b7=b9.offsetX;var i=b9.offsetY;if(cb){b7=cf;i=ce}if(b9.offsetX+cg>this._map.width){b7-=cg}if(b9.offsetY+b8>this._map.height){i-=b8}cd.setPosition(b7,i);cd.show()}});r.extend(aL.prototype,{initialize:function(e,i){if(this._container){return false}this._map=e;this._contextmenu=i;if(i.getDom()){this._render();this._bind();if(!this._enabled){this._enabled=true;this.disable()}}return true},remove:function(){var e=this;if(this._container){this._container.parentNode.removeChild(this._container);this._container=null}this._contextmenu=null;this._map=null},_draw:function(){if(this._contextmenu&&this._map){this.initialize(this._map,this._contextmenu)}},_render:function(){var ca="<div"+(this._opts.id?" id=\'"+this._opts.id+"\'":"")+" unselectable=\'on\'><span>"+this._text+"</span></div>";var ce=this._insertIndex;var b9=this._contextmenu.getDom();var cb=this._contextmenu._items;var b7=this._contextmenu._dividers;if(ce===-1){this._container=W(b9,ca)}else{for(var b8=0,e=cb.length;b8<e;b8++){if(b8===ce){var cc=cb[b8]._container||b7[cb[b8]._dIndex].dom;this._container=P(cc,ca);break}}}var cd=this._container.style;cd.padding="2px 6px";cd.margin="0 2px";cd.fontSize="12px";cd.MozUserSelect="none";cd.lineHeight="17px";cd.width=this._opts.width+"px";if(this._enabled){cd.color="#000";cd.cursor="pointer"}else{cd.color="#aaa";cd.cursor=this._map.config.defaultCursor}return this._container},_bind:function(){var e=this;r.on(this._container,"click",function(i){if(!e._enabled){aq(i);return}if(e._callback&&e._callback.call){e._callback.call(e,e._contextmenu.curPoint,e._contextmenu.curPixel)}});r.on(this._container,"mousedown",function(i){aq(i)});r.on(this._container,"mouseover",function(){if(!e._enabled){return}e._container.style.color="#6688cc"});r.on(this._container,"mouseout",function(){if(!e._enabled){return}e._container.style.color="#000"})},setText:function(e){if(!e){return}this._text=e+"";if(this._container){this._container.innerHTML="<span>"+this._text+"</span>"}},enable:function(){this._enabled=true;if(this._container){this._container.style.color="#000";this._container.style.cursor="pointer"}},disable:function(){this._enabled=false;if(this._container){this._container.style.color="#aaa";this._container.style.cursor=this._map.config.defaultCursor}}});');
